Упражнение 3 – Функции от по-висок ред
======================================

I. Функции като арументи и върнати стойности
--------------------------------------------

### Задача 1

Да се напише функция от по-висок ред `(constantly c)`, която по дадена
константа `c` връща функцията `f(x)=c`:

``` {.scheme}
(define forever-21 (constantly 21))
(forever-21 5) -> 21
(forever-21 10) -> 21
((constantly 21) 10) -> 21
```

### Задача 2

Да се напише функция от по-висок ред `(flip f)`, която приема двуместна
функция като аргумент и връща същата функция, но с разменени места на
нейните аргументи:

``` {.scheme}
(define f (flip -))
(f 4 10) -> 6 ; = (- 10 4)
((flip f) 4 10) -> -6
```

### Задача 3

Да се напише функцията от по-висок ред `(complement p)`, която по даден
предикат връща неговото отрицание:

``` {.scheme}
(define (less-than-5? x) (< x 5))
(define f (complement less-than-5?))
(f 3) ; => #f
(f 5) ; => #t
(f 7) ; => #t
```

### Задача 4

Да се напише функцията от по-висок ред `(compose f g)`, която връща
композицията на две дадени числови функции:

``` {.scheme}
(define f (compose (lambda (x) (+ x 1)) (lambda (x) (* x x)))) ; ((x^2)+1)
(f 3) -> 10
```

### Задача 5\* Да се напише функцията от по-висок ред `(repeat n f)`, която връща `n`-кратната композиция на дадена функция `f`:

``` {.scheme}
(define f (repeat 5 (lambda (x) (+ x 1))))
(f 10) -> 15
((repeat 0 (lambda (x) (+ x 1))) 10) -> ?
```

### Задача 6\* Да се напише функция `(derive f)`, която връща производната на дадена функция `f` (може да използвате `dx=0.000001` за прецизност)

### Задача 7\* Да се напише функция `(derive-n n f)`, която връща `n`-тата производна на дадена функция `f`.

II. Acumulate
-------------

### Задача 8

Да се напише функция `(!! n)`, която по дадено естествено число `n`
изчислява `n!!` - произведението на всички числа, по-малки или равни на
`n`, със същата четност:

``` {.scheme}
(!! 5) -> 15    ; =1*3*5
(!! 10) -> 3840 ; =2*4*6*8*10
```

### Задача 9

Да се напише функция `(binomial n k)`, която за дадени естествени числа
`n` и `k` изчислява биномния коефициент 'n над k'.

### Задача 9.1

Да се напише функцията `binomial` с едно извикване на `accumulate`.

### Задача 10

Да се напише функция `(2^ n)`, която изчислява 2<sup>n</sup> (където `n`
е естествено), използвайки: - accumulate - binomial от предишната задача

### Задача 11

Да се напише функция `(divisors-sum n)`, която намира сумата на всички
делители на естественото число `n`.

    (divisors-sum 12) -> 28 ;1+2+3+4+6+12=28

### Задача 12

Да се напише функция `(count p? a b)`, която проверява за колко измежду
числата в целочисления интервал `[a;b]` е верен предиката `p?`.

### Задача 13

Да се напишат функциите `(all? p? a b)` и `(any? p? a b)`, които
проверяват дали даден предикат `p?` е изпълнен за всяко (съотв. за
някое) число в интервала `[a;b]` - Упътване: не можем да използваме
вградените `and` и `or` във функции от по-висок ред, но можем да си
дефинираме свои, напр. `(lambda (x y) (and x y)`.

### Задача 14

Да се напише функция `(prime? n)`, която проверява дали дадено число е
просто:

    (prime? 1) -> #f ;(!)
    (prime? 2) -> #t
    (prime? 101) -> #t
